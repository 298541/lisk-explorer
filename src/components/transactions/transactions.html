<!--
/*
 * LiskHQ/lisk-explorer
 * Copyright Â© 2018 Lisk Foundation
 *
 * See the LICENSE file at the top-level directory of this distribution
 * for licensing information.
 *
 * Unless otherwise agreed in a custom licensing agreement with the Lisk Foundation,
 * no part of this software, including this file, may be copied, modified,
 * propagated, or distributed except according to the terms contained in the
 * LICENSE file.
 *
 * Removal or modification of this copyright notice is prohibited.
 *
 */
-->
<section>
	<div class="secondary_navbar hidden-xs hidden-sm" scroll data-ng-class="{'hidden': !vm.secondaryNavbar}" data-ng-if="vm.tx.id"
		data-ng-init="vm.hideSNavbar=0">
		<div class="container" data-ng-if="!vm.hideSNavbar">
			<div class="col-md-6 col-lg-7 text-left">
				<h3>Transaction</h3>
				<div class="ellipsis">
					<small>{{tx.id}}</small>
					<span class="btn-copy" clip-copy="tx.id"></span>
				</div>
			</div>
			<div class="col-md-6 col-lg-5 text-right">
				<span data-ng-if="vm.tx.confirmations" class="txvalues txvalues-success">{{vm.tx.confirmations}} Confirmations</span>
				<span data-ng-if="!vm.tx.confirmations" class="txvalues txvalues-danger">Unconfirmed Transaction!</span>
				<span class="txvalues txvalues-primary">{{vm.tx.amount | currency:$root.currency:$root.decimalPlaces}} {{$root.currency.symbol}}</span>
			</div>
		</div>
		<div class="hide_snavbar">
			<a href="#" data-ng-click="vm.hideSNavbar=!vm.hideSNavbar">
				<span data-ng-if="vm.hideSNavbar"><span class="text-muted glyphicon glyphicon-chevron-down"></span></span>
				<span data-ng-if="!vm.hideSNavbar"><span class="text-muted glyphicon glyphicon-chevron-up"></span></span>
			</a>
		</div>
	</div>
	<h1>Transaction <small>{{vm.tx.id}}</small>&nbsp;<span class="btn-copy" clip-copy="vm.tx.id"></span></h1>
	<div class="text-muted" data-ng-if="!vm.tx.id">
		<span>Loading Transaction <i class="fa fa-spinner fa-spin"></i>
	</div>
	<span data-ng-if="vm.tx.id">
		<div class="table-responsive">
			<table class="table summary">
				<tbody>
					<tr>
						<td class="left-padding-xs left-padding-s left-padding-m left-padding-l double"><strong>Sender</strong></td>
						<td class="right-padding-xs right-padding-s right-padding-m right-padding-l double text-right">
								<a href="/address/{{vm.tx.senderId}}">{{vm.tx.senderId}}</a>
							<div data-ng-if="tx.knownSender">
								<span class="owner-name">{{vm.tx.knownSender.owner}}</span>
								<span class="owner-desc text-muted">{{vm.tx.knownSender.description}}</span>
							</div>
						</td>
					</tr>
					<tr>
						<td class="left-padding-xs left-padding-s left-padding-m left-padding-l double"><strong>Recipient</strong></td>
						<td class="right-padding-xs right-padding-s right-padding-m right-padding-l double text-right">
							<div data-ng-if="vm.tx.type == 0">
									<a href="/address/{{vm.tx.recipientId}}">{{vm.tx.recipientId}}</a>
								<div data-ng-if="vm.tx.knownRecipient">
									<span class="owner-name">{{vm.tx.knownRecipient.owner}}</span>
									<span class="owner-desc text-muted">{{vm.tx.knownRecipient.description}}</span>
								</div>
							</div>
							<div data-ng-if="vm.tx.type >= 1">{{vm.tx | txType}}</div>
						</td>
					</tr>
					<tr>
						<td class="left-padding-xs left-padding-s left-padding-m left-padding-l double"><strong>Confirmations</strong></td>
						<td class="right-padding-xs right-padding-s right-padding-m right-padding-l double text-right">{{vm.tx.confirmations || 0}}</td>
					</tr>
					<tr>
						<td class="left-padding-xs left-padding-s left-padding-m left-padding-l double"><strong>Amount</strong></td>
						<td class="right-padding-xs right-padding-s right-padding-m right-padding-l double text-right">{{vm.tx.amount | currency:$root.currency:$root.decimalPlaces}} <span class="text-muted">{{$root.currency.symbol}}</span></td>
					</tr>
					<tr>
						<td class="left-padding-xs left-padding-s left-padding-m left-padding-l double"><strong>Fee</strong></td>
						<td class="right-padding-xs right-padding-s right-padding-m right-padding-l double text-right">{{vm.tx.fee | currency:$root.currency}} <span class="text-muted">{{$root.currency.symbol}}</span></td>
					</tr>
					<tr>
						<td class="left-padding-xs left-padding-s left-padding-m left-padding-l double"><strong>Timestamp</strong></td>
						<td class="right-padding-xs right-padding-s right-padding-m right-padding-l double text-right">{{vm.tx.timestamp | timestamp}}</td>
					</tr>
					<tr>
						<td class="left-padding-xs left-padding-s left-padding-m left-padding-l double"><strong>Block </strong></td>
						<td data-ng-if="vm.tx.blockId" class="right-padding-xs right-padding-s right-padding-m right-padding-l double text-right">
							<a href="/block/{{vm.tx.blockId}}">{{vm.tx.blockId}}</a>
						</td>
						<td data-ng-if="!vm.tx.blockId" class="right-padding-xs right-padding-s right-padding-m right-padding-l double text-right">Unconfirmed</td>
					</tr>
				</tbody>
			</table>
		</div>

		<div class="horizontal-padding-xs horizontal-padding-s horizontal-padding-m horizontal-padding-l double" data-ng-if="vm.tx.votes.added">
			<h2>Added votes <small>{{vm.tx.votes.added.length}}</small></h2>
			<div class="row">
				<div class="col-md-12">
					<span data-ng-repeat='v in vm.tx.votes.added'>
						<span data-ng-if="!$last">
							<a href="/address/{{v.delegate.address}}">{{v.delegate.username || v.delegate.address}}</a>
							<span class="text-muted">&bull;</span>
						</span>
						<span data-ng-if="$last">
							<a href="/address/{{v.delegate.address}}">{{v.delegate.username || v.delegate.address}}</a>
						</span>
					</span>
				</div>
			</div>
		</div>

		<div class="delegate horizontal-padding-xs horizontal-padding-s horizontal-padding-m horizontal-padding-l double" data-ng-if="vm.tx.votes.deleted">
			<h2>Deleted votes <small>{{vm.tx.votes.deleted.length}}</small></h2>
			<div class="row">
				<div class="col-md-12">
					<span data-ng-repeat='v in vm.tx.votes.deleted'>
						<span data-ng-if="!$last">
							<a href="/address/{{v.delegate.address}}">{{v.delegate.username || v.delegate.address}}</a>
							<span class="text-muted">&bull;</span>
						</span>
						<span data-ng-if="$last">
							<a href="/address/{{v.delegate.address}}">{{v.delegate.username || v.delegate.address}}</a>
						</span>
					</span>
				</div>
			</div>
		</div>
		<h1>Details</h1>
		<div id="table-mobile" class="table-responsive">
			<table class="table details">
				<thead>
					<tr>
						<th class="left-padding-xs left-padding-s left-padding-m left-padding-l double" role="button" data-ng-class="filter.predicate === 'id' ? 'text-primary' : 'text-muted'" data-ng-click="filter.setPredicate('id')">
							<span class="hidden-md">
								Transaction ID
								<i class="glyphicon" data-ng-class="filter.reverse ? 'glyphicon-triangle-bottom' : 'glyphicon-triangle-top'" ng-if="filter.predicate === 'id'"></i>
							</span>
							<span class="visible-md">ID</span>
						</th>
						<th role="button" data-ng-class="filter.predicate === 'timestamp' ? 'text-primary' : 'text-muted'" data-ng-click="filter.setPredicate('timestamp')">
							<span>Date</span><i class="glyphicon" data-ng-class="filter.reverse ? 'glyphicon-triangle-bottom' : 'glyphicon-triangle-top'" ng-if="filter.predicate === 'timestamp'"></i>
						</th>
						<th role="button" data-ng-class="filter.predicate === 'senderId' ? 'text-primary' : 'text-muted'" data-ng-click="filter.setPredicate('senderId')">
							<span>Sender</span><i class="glyphicon" data-ng-class="filter.reverse ? 'glyphicon-triangle-bottom' : 'glyphicon-triangle-top'" ng-if="filter.predicate === 'senderId'"></i>
						</th>
						<th role="button" data-ng-class="filter.predicate === 'recipientId' ? 'text-primary' : 'text-muted'" data-ng-click="filter.setPredicate('recipientId')">
							<span>Recipient</span><i class="glyphicon" data-ng-class="filter.reverse ? 'glyphicon-triangle-bottom' : 'glyphicon-triangle-top'" ng-if="filter.predicate === 'recipientId'"></i>
						</th>
						<th role="button" data-ng-class="filter.predicate === 'amount' ? 'text-primary' : 'text-muted'" data-ng-click="filter.setPredicate('amount')" class="amount text-right">
							<span>Amount</span><i class="glyphicon" data-ng-class="filter.reverse ? 'glyphicon-triangle-bottom' : 'glyphicon-triangle-top'" ng-if="filter.predicate === 'amount'"></i>
						</th>
						<th role="button" data-ng-class="filter.predicate === 'fee' ? 'text-primary' : 'text-muted'" data-ng-click="filter.setPredicate('fee')" class="text-nowrap text-right">
							<span>Fee</span><i class="glyphicon" data-ng-class="filter.reverse ? 'glyphicon-triangle-bottom' : 'glyphicon-triangle-top'" ng-if="filter.predicate === 'fee'"></i>
						</th>
						<th role="button" data-ng-class="filter.predicate === 'confirmations' ? 'text-primary' : 'text-muted'" data-ng-click="filter.setPredicate('confirmations')" class="text-right right-padding-m right-padding-l double">
							<span class="hidden-md">Confirm.<i class="glyphicon" data-ng-class="filter.reverse ? 'glyphicon-triangle-bottom' : 'glyphicon-triangle-top'" ng-if="filter.predicate === 'confirmations'"></i></span>
							<span class="visible-md"><i class="glyphicon glyphicon-check" style="left:0"></i></span>
						</th>
					</tr>
				</thead>
				<tbody>
					<tr data-transaction-item data-address="vm.tx.senderId" data-ng-if="vm.tx.id" data-tx="vm.tx"></tr>
				</tbody>
			</table>
		</div>
	</span>
</section>
