<section data-ng-controller="DelegateController">

  <div class="delegate">
    <h2>
      Delegate&nbsp;
      <small data-ng-if="address.secondSignature" data-tooltip="Second signiture">
        <i class="glyphicon glyphicon-lock"></i>
      </small>
      <small data-ng-if="address.multisignatures && address.multisignatures.length" data-tooltip="Multi Signiture">
        <i class="glyphicon glyphicon-info-sign"></i>
      </small>
    </h2>
    <div class="row">
      <div class="col-md-12">
        <div class="table-responsive">
          <table class="table">
            <tbody>
              <tr>
                <td><strong>Name</strong></td>
                <td class="text-right" ng-bind-html="address.delegate.username | proposal:delegateProposals"></td>
              </tr>
              <tr>
                <td><strong>Uptime</strong></td>
                <td class="text-right">{{address.delegate.productivity || 0.00}}%</td>
              </tr>
              <tr>
                <td><strong>Rank / Status</strong></td>
                <td class="text-right">{{address.delegate.rate}} / <span class="text-muted">{{(address.delegate.rate <= 101) ? 'Active' : 'Standby'}}</span></td>
              </tr>
              <tr>
                <td><strong>Approval</strong></td>
                <td class="text-right">{{address.delegate.approval}}%</td>
              </tr>
              <tr>
                <td><strong>Forged</strong></td>
                <td class="text-right">{{address.delegate.forged || 0 | currency:currency}} <span class="text-muted">{{currency.symbol}}</span></td>
              </tr>
              <tr>
                <td><strong>Blocks</strong></td>
                <td class="text-right">{{address.delegate.producedblocks}} <span class="text-muted">({{address.delegate.missedblocks}} missed)</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div class="delegate-vote" data-ng-if="address.votes">
    <h2>
      <a href="" data-ng-show="!showVotes" data-ng-click="showVotes=!showVotes"><small><i class="fa fa-plus-square-o"></i></small></a>
      <a href="" data-ng-show="showVotes" data-ng-click="showVotes=!showVotes"><small><i class="fa fa-minus-square-o"></i></small></a>
      Votes <small>{{address.votes.length}}</small>
    </h2>
    <div class="row" data-ng-init="showVotes=false" data-ng-show="showVotes">
      <div class="col-md-12">
        <span data-ng-repeat='v in address.votes'>
          <span data-ng-if="!$last">
            <a href="/address/{{v.address}}">{{v | votes}}</a>
            <span class="text-muted">&bull;</span>
          </span>
          <span data-ng-if="$last">
            <a href="/address/{{v.address}}">{{v | votes}}</a>
          </span>
        </span>
      </div>
    </div>
  </div>
  <div class="delegate-vote" data-ng-if="address.voters">
    <h2>
      <a href="" data-ng-show="!showVoters" data-ng-click="showVoters=!showVoters"><small><i class="fa fa-plus-square-o"></i></small></a>
      <a href="" data-ng-show="showVoters" data-ng-click="showVoters=!showVoters"><small><i class="fa fa-minus-square-o"></i></small></a>
      Voters <small>{{address.voters.length}}</small>
    </h2>
    <div class="row" data-ng-init="showVoters=false" data-ng-show="showVoters">
      <div class="col-md-12">
        <span data-ng-repeat='v in address.voters'>
          <span data-ng-if="!$last">
            <a href="/address/{{v.address}}">{{v | votes}}</a>
            <span class="text-muted">&bull;</span>
          </span>
          <span data-ng-if="$last">
            <a href="/address/{{v.address}}">{{v | votes}}</a>
          </span>
        </span>
      </div>
    </div>
  </div>
</section>
